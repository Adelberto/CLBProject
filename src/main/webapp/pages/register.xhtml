<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="template/ui.xhtml">
	<ui:define name="body">
		<p:dialog widgetVar="registerPanel" id="registerPanel" modal="true" position="center center"
			header="New User" draggable="false" closeOnEscape="true"
			styleClass="registerDialog" resizable="false">
			<h:form id="registerForm">
				<p:spacer height="5" />
				<p:panelGrid columns="3" styleClass="mainTable">
					<p:column>
						<p:outputLabel>Name* :</p:outputLabel>
					</p:column>
					<p:column>
						<p:inputText validatorMessage="Name too short!" requiredMessage="Name is required!" id="nameUser" value="#{clbHomeBean.user.name}" required="true" label="nameUser">
							<f:validateLength minimum="3"></f:validateLength>
						</p:inputText>
					</p:column>
					<p:column>
						<p:message for="nameUser"/>
					</p:column>
					<p:column>
						<p:outputLabel>Email* :</p:outputLabel>
					</p:column>
					<p:column>
						<p:inputText requiredMessage="Email is required!" validatorMessage="Email is not valid!" value="#{clbHomeBean.user.username}"
							required="true" label="emailUser" id="emailUser">
							<f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
						</p:inputText>
					</p:column>
					<p:column>
						<p:message for="emailUser"/>
					</p:column>
					<p:column>
						<p:outputLabel>Password* :</p:outputLabel>
					</p:column>
					<p:column>
						<p:inputText requiredMessage="Password is required!" value="#{clbHomeBean.user.password}" label="passwordUser" id="passwordUser" required="true" type="password" validatorMessage="Al least 6 characters are needed!">
							<f:validateLength minimum="6"></f:validateLength>
						</p:inputText>
					</p:column>
					<p:column>
						<p:message for="passwordUser"/>
					</p:column>
					<p:column>
						<p:outputLabel>Address :</p:outputLabel>
					</p:column>
					<p:column>
						<p:inputTextarea rows="5" value="#{clbHomeBean.user.address}"></p:inputTextarea>
					</p:column>
					<p:column>
					</p:column>
				</p:panelGrid>
				<p:spacer height="25" />
				<div align="center">
					<p:commandButton action="#{clbHomeBean.registerUser}" validateClient="true"
						styleClass="signButton" value="Register" ajax="true" oncomplete="if (!args.validationFailed){ PF('successPanel').show() }"
						update="registerForm"></p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<ui:include src="successDialog.xhtml">
			<ui:param name="successMessage" value="User was created successfully!" />
			<ui:param name="hideDialog" value="registerPanel" />
		</ui:include>
	</ui:define>
</ui:composition>